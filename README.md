# README
Repair4J 是一个面向Java程序缺陷修复的原型工具，允许开发人员应用不同的实验设置（开关变异操作）和定制化操作（自定义变异算子）。

## Installation

- Install `Apache Ant` (用于运行sample).
- Clone `Repair4J`
- Edit `./sample/config/Repair4J.properties`:
  - Set ant_path = `[/path/to/ant]` 
- Edit ./sample/config/build.xml:
  - Set the value of `<property name="junit.jar" value="[/path/to/junit.jar]">`
  - Set the value of `<property name="hamcrest-all.jar" value="[/path/to/hamcrest-all.jar]">`
- Build and install the project (`mvn clean install`).

## Directory Structure
  
* `src\`: The Repair4J library
* `test\`: Contains the sample program `SampleUse.java` which runs Repair4J.
* `sample\`: A sample program for trying out Repair4J
* `sample\src`: The sample program under test (an LRU cache implementation)
* `sample\test`: The JUnit test cases for the sample program under test
* `sample\config`: The Repair4J configuration files for repairing the sample program. This includes:
    * `repair4J.properties`: The configuration file
    * `faulty.cov`: The code coverage file for potentially faulty statements to mutate.
    * `seed.cov`: The code coverage file for seed statements to perform the mutations with.
    * `build.xml`: The Apache Ant build script that runs the JUnit tests for the sample program.

## Configuring and Running

- 示例配置文件 `sample\config\repair4J.properties`
- 运行命令行参数
  - `mvn exec:java -Dexec.mainClass="com.zju.edu.huangyh.repair.Respair4JMain" -Dexec.args="./sample/config/repair4J.properties"`
  
## Output

Repair4J outputs result data to the folder specified by the `build_directory` property in `repair4J.properties`. The following outputs are stored in this directory:

* `mutation-log`: A log of the mutation operations performed for each candidate and each generation.
* `compile-log`: A log of compiler errors generated by the JDK compiler. These may occur if all variables are in scope but there are still semantic errors (e.g., a return statement is inserted with the incorrect return type). These may also occur if the original build is not set up correctly.
* `classes_Candidate[x]_Generation[y]_[timestamp]`: If a patch was generated that passes all test cases, the binary is stored in a folder with this signature.
* `test-reports`: A directory containing the reports from the test script (Ant script or custom Bash script). This isn't directly output by Repair4J, but for running experiments all test results should be logged by the script.


